<main class="sms-form-container">
  <h1>簡訊報案</h1>
  <p class="subtitle">填寫以下表單，透過您裝置的簡訊功能傳送報案訊息。</p>

  @if (isDesktop()) {
    <div class="desktop-warning">
      <mat-icon>warning</mat-icon>
      <span>簡訊連結可能無法在桌面瀏覽器上使用，請使用行動裝置開啟。</span>
    </div>
  }

  @defer (on idle) {

    <div class="info-banner">
      <mat-icon>info</mat-icon>
      <span>發送此簡訊是免費的。</span>
    </div>

    <form novalidate (submit)="$event.preventDefault(); sendSms()">
      <app-location-input
        [(address)]="address"
        [(district)]="district"
      />

      <app-violation-input
        [(violation)]="violation"
        [(licensePlate)]="licensePlate"
      />

      <app-sms-preview [message]="composedMessage()" />

      @if (districtMismatch()) {
        <div class="district-mismatch-warning" role="alert">
          <mat-icon>warning</mat-icon>
          <span>輸入地址與報案行政區不一致，請確認後再發送。</span>
        </div>
      }

      <div class="notice-banner">
        <mat-icon>gavel</mat-icon>
        <span>報案的受理與否，最終由該轄區警察局依法審核決定。</span>
      </div>

      <button mat-flat-button type="submit" [disabled]="isDesktop() || districtMismatch()">
        <mat-icon>send</mat-icon>
        發送簡訊
      </button>
    </form>
  } @placeholder {
    <div class="form-skeleton" aria-hidden="true">
      <div class="skeleton-banner"></div>
      <div class="skeleton-field"></div>
      <div class="skeleton-field"></div>
      <div class="skeleton-field"></div>
      <div class="skeleton-button"></div>
    </div>
  }
</main>
